<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<!-- saved from url=(0029)http://www.helpandmanual.com/ -->
<head>
   <title>Apache Tomcat 8</title>
   <meta name="Generator" content="Lumis Portal 8.1.1.150831 - Copyright © 2006–2015 Lumis EIP Tecnologia da Informação LTDA. Todos os direitos reservados."/>
   <meta name="keywords" content="" />
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
   <meta http-equiv="Content-Style-Type" content="text/css" />
   <link type="text/css" href="default.css" rel="stylesheet" />
   	<style type="text/css" rel="stylesheet"> 
	<!-- 
	BODY {
	scrollbar-face-color:#e9a349;
	scrollbar-highlight-color:#DFDFDF;
	scrollbar-3dlight-color:#e9a349;
	scrollbar-darkshadow-color:#bb5a11;
	scrollbar-shadow-color:#bb5a11;
	scrollbar-arrow-color:#bb5a11;
	scrollbar-track-color:#e9a349;
	}
	-->
	</style>
<script type="text/javascript" src="helpman_topicinit.js"></script>
<!-- Redirect browser to frame page if page is not in the content frame. -->
<script type="text/javascript">
<!--
if (location.search.lastIndexOf("toc=0")<=0) {
  if (parent.frames.length==0) { parent.location.href="index.htm?tomcat.htm"; }
  else { parent.quicksync('a3.5.1'); }
}
//-->
</script>
<script type="text/javascript" src="highlight.js"></script></head>
<body style="margin: 0px 0px 0px 0px; background: #FFFFFF;" onload="highlight();">
<div id="hmpopupDiv" style="visibility:hidden; position:absolute; z-index:1000; "></div>


<table width="100%" border="0" cellspacing="0" cellpadding="5" bgcolor="#FFFFFF">
  <tr valign="middle">
    <td align="left">
      <p class="p_Heading1"><span class="f_Heading1">Apache Tomcat 8</span></p>

    </td>
    <td align="right">
     <span style="font-size: 9pt">
     <a href="visaogeral.htm">Top</a>&nbsp;
     <a href="servidoraplicacao.htm">Previous</a>&nbsp;
     <a href="jboss_eap_6.htm">Next</a>
     </span>
    </td>
  </tr>
</table>


<!-- Placeholder for topic body. -->
<table width="100%" border="0" cellspacing="0" cellpadding="5"><tr valign="top"><td align="left">
<p>Este tópico descreve como o <span style="font-style: italic;">Lumis Portal </span>deve ser instalado no servidor <span style="font-style: italic;">Apache Tomcat 8</span>.</p>
<p style="margin: 8px 0px 0px 0px;">Inicialmente, deve-se editar o arquivo server.xml, localizado na pasta <span style="font-style: italic;">“%CATALINA_HOME%/conf</span> ”, incluindo ou alterando as seguintes configurações no elemento <span style="font-style: italic;">Connector</span>:</p>
<p style="text-indent: -118px; margin: 8px 0px 0px 130px;">a)  <span class="f_CodeExample">maxPostSize</span>: Por padrão, o <span style="font-style: italic;">Tomcat</span> aceita apenas 2MB de POST em formulários. Para aumentar esse limite deve-se incluir este atributo com o limite desejado em <span style="font-style: italic;">bytes</span>.<br>
&nbsp;</p>
<div style="text-align: center; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px -26px;"><table align="center" cellspacing="0" cellpadding="0" border="0" style="border: none; border-spacing:0px; border-collapse: collapse;">
<tr style="text-align:left;vertical-align:top;">
<td valign="top" width="405" bgcolor="#f3f3f3" style="width:405px; height:64px; background-color:#f3f3f3; border: solid 1px #808080;"><p>&nbsp;</p>
<p style="line-height: 1.25;"><span style="font-family: 'Courier New';">&lt;Connector</span></p>
<p style="line-height: 1.25;"><span style="width:48px">&nbsp;</span><span style="font-family: 'Courier New';">connectionTimeout="20000"</span></p>
<p style="line-height: 1.25;"><span style="width:48px">&nbsp;</span><span style="font-family: 'Courier New';">port="8080"</span></p>
<p style="line-height: 1.25;"><span style="width:48px">&nbsp;</span><span style="font-family: 'Courier New';">protocol="HTTP/1.1"</span></p>
<p style="line-height: 1.25;"><span style="width:48px">&nbsp;</span><span style="font-family: 'Courier New';">redirectPort="8443"</span></p>
<p style="line-height: 1.25;"><span style="width:48px">&nbsp;</span><span style="font-family: 'Courier New';">maxThreads="60"</span></p>
<p style="line-height: 1.25;"><span style="width:48px">&nbsp;</span><span style="font-family: 'Courier New';">enableLookups="false"</span></p>
<p style="line-height: 1.25;"><span style="width:48px">&nbsp;</span><span style="font-family: 'Courier New'; font-weight: bold; color: #0000ff;">maxPostSize="2097152"</span></p>
<p style="line-height: 1.25;"><span style="font-family: 'Courier New'; font-style: italic;">/</span><span style="font-family: 'Courier New'; font-style: italic; font-weight: bold;">&gt;</span></p>
<p>&nbsp;</p>
</td>
</tr>
</table>
</div>
<p>&nbsp;</p>
<p style="margin: 8px 0px 0px 0px;"><span style="font-weight: bold;">Bibliotecas Compartilhadas</span></p>
<p style="margin: 8px 0px 0px 0px;">É preciso instalar algumas bibliotecas (arquivos . <span style="font-style: italic;">JAR</span>) na área de bibliotecas compartilhadas no servidor de aplicação.</p>
<p>&nbsp;</p>
<p>No <span style="font-style: italic;">Tomcat</span>, basta copiar os arquivos JAR, que estão na pasta <span style="font-style: italic;">%LUMIS_HOME%</span><span style="font-style: italic;">/lib/shared</span>, para a pasta <span style="font-style: italic;">%CATALINA_HOME%/lib</span>.</p>
<p>&nbsp;</p>
<p><span style="font-style: italic; font-weight: bold;">Endorsed</span></p>
<p>&nbsp;</p>
<p>É preciso instalar algumas biblioteas (arquivos . <span style="font-style: italic;">JAR</span>) na área endorsed do servidor de aplicação. </p>
<p>&nbsp;</p>
<p>No <span style="font-style: italic;">Tomcat</span>, basta copiar os arquivos JAR, que estão na pasta <span style="font-style: italic;">%LUMIS_HOME%</span><span style="font-style: italic;">/lib/endorsed</span>, para a pasta <span style="font-style: italic;">%CATALINA_HOME%/endorsed.</span></p>
<p>&nbsp;</p>
<p><span style="font-weight: bold;">Deployment</span></p>
<p>&nbsp;</p>
<p>a) Alterar o arquivo “<span style="font-style: italic;">setup/Tomcat/portal.xml</span>” para indicar o caminho correto da &nbsp;instalação do produto:</p>
<p>&nbsp;</p>
<div style="text-align: center; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 1px;"><table align="center" cellspacing="0" cellpadding="0" bgcolor="#f3f3f3" border="0" style="background-color: #f3f3f3; border: none; border-spacing:0px; border-collapse: collapse;">
<tr style="text-align:left;vertical-align:top;">
<td valign="top" width="578" style="width:578px; border: solid 1px #000000;"><p style="text-align: center;">&nbsp;</p>
<p class="p_CodeExample" style="text-align: center;"><span class="f_CodeExample">&lt;Context&nbsp;path="/portal"&nbsp;docBase="C:/LumisPortal/www"&nbsp;crossContext="true"/&gt;</span></p>
<p class="p_CodeExample" style="text-align: center;"><span class="f_CodeExample">&nbsp;</span></p>
</td>
</tr>
</table>
</div>
<p>&nbsp;</p>
<p style="text-indent: 24px; margin: 0px 0px 0px 24px;">Onde:</p>
<p style="margin: 8px 0px 0px 48px;"><span style="font-family: 'Arial Unicode MS', 'Lucida Sans Unicode', 'Arial';">&#8226;</span><span style="font-size: 7pt; font-family: 'Times New Roman';"> &nbsp; </span><span style="font-style: italic;">Path: n</span>ome do contexto. O nome do arquivo também define o nome do contexto (portal.xml);</p>
<p style="text-indent: 24px; margin: 8px 0px 0px 24px;"><span style="font-family: 'Arial Unicode MS', 'Lucida Sans Unicode', 'Arial';">&#8226;</span><span style="font-size: 7pt; font-family: 'Times New Roman';"> &nbsp; </span><span style="font-style: italic;">docBase</span>: caminho onde está instalada a pasta “<span style="font-style: italic;">www</span>”;</p>
<p style="text-indent: 24px; margin: 8px 0px 0px 3px;"><span style="width:45px">&nbsp;</span><span style="font-family: 'Arial Unicode MS', 'Lucida Sans Unicode', 'Arial';">&#8226;</span><span style="font-size: 7pt; font-family: 'Times New Roman';"> &nbsp; </span><span style="font-style: italic;">crossContext</span>: permite a utilização de <span style="font-style: italic;">portlets padrão JSR-168</span> no <span style="font-style: italic;">Lumis Portal</span>. Estes são instalados no servidor de aplicação em contextos separados.</p>
<p style="text-indent: 24px; margin: 8px 0px 0px 24px;">&nbsp;</p>
<p style="text-indent: -24px; margin: 8px 0px 0px 24px;">b) Colocá-lo no diretório de configuração do <span style="font-style: italic;">Tomcat</span>: &nbsp;“<span style="font-style: italic;">conf/Catalina/localhost</span>”.</p>
<p style="margin: 0px 0px 0px 24px;">&nbsp;</p>
<p><a name="tomcat6e7datasource"></a><span style="font-weight: bold;">Configuração do DataSource</span></p>
<p>&nbsp;</p>
<p>É possível configurar o <span style="font-style: italic;"><a href="datasource.htm">Data Source</a>,</span> para delegar ao servidor de aplicação, a gerência do <span style="font-style: italic;">pool</span> de conexões com o banco de dados.</p>
<p>&nbsp;</p>
<p>No <span style="font-style: italic;">server.xml</span> ou no <span style="font-style: italic;">portal.xml</span> a seguinte configuração deve ser realizada:</p>
<p>&nbsp;</p>
<div style="text-align: justify; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 1px;"><table cellspacing="0" cellpadding="2" bgcolor="#f3f3f3" border="1" style="background-color: #f3f3f3; border-color : #c0c0c0 #000000 #000000 #c0c0c0; border-style: solid; border-width: 1px; border-spacing:0px;">
<tr style="text-align:left;vertical-align:top;">
<td valign="middle" style="border-color : #000000 #c0c0c0 #c0c0c0 #000000; border-style: solid; border-width: 1px;"><p style="white-space: nowrap;"><span style="font-family: 'Courier New';">&nbsp;&lt;!--&nbsp;For&nbsp;enabling&nbsp;the&nbsp;datasource&nbsp;in&nbsp;the&nbsp;Tomcat,&nbsp;add&nbsp;a&nbsp;tag&nbsp;similar&nbsp;to&nbsp;the&nbsp;example&nbsp;below&nbsp;inside&nbsp;the&nbsp;</span></p>
<p style="white-space: nowrap;"><span style="font-family: 'Courier New';">application's&nbsp;Context&nbsp;tag&nbsp;and&nbsp;put&nbsp;the&nbsp;jdbc&nbsp;driver&nbsp;JAR&nbsp;file&nbsp;inside&nbsp;tomcat/common/lib.</span></p>
<p style="white-space: nowrap;"><span style="font-family: 'Courier New';">If&nbsp;your&nbsp;JDBC&nbsp;driver&nbsp;does&nbsp;not&nbsp;support&nbsp;Connection.isValid&nbsp;method,&nbsp;must&nbsp;also&nbsp;be&nbsp;included&nbsp;in&nbsp;Resource&nbsp;the&nbsp;</span></p>
<p style="white-space: nowrap;"><span style="font-family: 'Courier New';">attribute&nbsp;validationQuery&nbsp;with&nbsp;a&nbsp;value&nbsp;that&nbsp;is&nbsp;a&nbsp;query&nbsp;that&nbsp;may&nbsp;be&nbsp;used&nbsp;to&nbsp;validate&nbsp;the&nbsp;connection.</span></p>
<p style="white-space: nowrap;"><span style="font-family: 'Courier New';">For&nbsp;example,&nbsp;for&nbsp;MS&nbsp;SQL&nbsp;Server&nbsp;could&nbsp;be&nbsp;used:&nbsp;validationQuery="select&nbsp;1"</span></p>
<p style="white-space: nowrap;"><span style="font-family: 'Courier New';">More&nbsp;details&nbsp;and&nbsp;examples&nbsp;in&nbsp;<a href="http://tomcat.apache.org/tomcat-8.0-doc/jndi-datasource-examples-howto.html" target="_blank" class="weblink">http://tomcat.apache.org/tomcat-8.0-doc/jndi-datasource-examples-howto.html</a>&nbsp;&nbsp;--&gt;</span></p>
<p style="white-space: nowrap;"><span style="font-family: 'Courier New';">&lt;Resource&nbsp;name="jdbc/portal"&nbsp;type="javax.sql.DataSource"</span></p>
<p style="white-space: nowrap;"><span style="font-family: 'Courier New';">&nbsp;maxTotal="100"&nbsp;maxIdle="30"&nbsp;maxWaitMillis="10000"</span></p>
<p style="white-space: nowrap;"><span style="font-family: 'Courier New';">&nbsp;auth="Container"&nbsp;driverClassName="my.database.Driver"</span></p>
<p style="white-space: nowrap;"><span style="font-family: 'Courier New';">&nbsp;url="jdbc:my:database:url"&nbsp;username="username"&nbsp;password="password"&nbsp;/&gt;</span></p>
</td>
</tr>
</table>
</div>
<p style="margin: 14px 0px 0px 0px;">Já no arquivo <span style="font-style: italic;">web.xml</span> deve ser adicionado o seguinte fragmento:<br>
&nbsp;</p>
<div style="text-align: justify; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 1px;"><table cellspacing="0" cellpadding="2" bgcolor="#f3f3f3" border="1" style="background-color: #f3f3f3; border-color : #c0c0c0 #000000 #000000 #c0c0c0; border-style: solid; border-width: 1px; border-spacing:0px;">
<tr style="text-align:left;vertical-align:top;">
<td valign="middle" style="border-color : #000000 #c0c0c0 #c0c0c0 #000000; border-style: solid; border-width: 1px;"><p style="white-space: nowrap; margin: 14px 0px 0px 0px;"><span style="font-family: 'Courier New';">&lt;resource-ref&gt;</span></p>
<p style="white-space: nowrap;"><span style="font-family: 'Courier New';">&nbsp;&nbsp;&nbsp;&lt;description&gt;Portal&nbsp;DataSource&lt;/description&gt;</span></p>
<p style="white-space: nowrap;"><span style="font-family: 'Courier New';">&nbsp;&nbsp;&nbsp;&lt;res-ref-name&gt;jdbc/portal&lt;/res-ref-name&gt;</span></p>
<p style="white-space: nowrap;"><span style="font-family: 'Courier New';">&nbsp;&nbsp;&nbsp;&lt;res-type&gt;javax.sql.DataSource&lt;/res-type&gt;</span></p>
<p style="white-space: nowrap;"><span style="font-family: 'Courier New';">&nbsp;&nbsp;&nbsp;&lt;res-auth&gt;Container&lt;/res-auth&gt;</span></p>
<p style="white-space: nowrap;"><span style="font-family: 'Courier New';">&lt;/resource-ref&gt;</span><br>
<span style="font-family: 'Courier New';">&nbsp;</span></p>
</td>
</tr>
</table>
</div>
<p style="white-space: nowrap; margin: 14px 0px 0px 0px;">&nbsp;</p>

</td></tr></table>
<hr size="1" /><p style="font-size: 8pt"><b>Lumis Portal</b> 8.1.1.150831<br><i>Copyright © 2006–2015 Lumis EIP Tecnologia da Informação LTDA. Todos os direitos reservados.</i></p>
</body>
</html>
